const e=window.aleph.h;import{a as t,b as i}from"./chunk-1519ad9e.js";class n{constructor(){this.boundingBoxVisible=!1,this.displayMode=t.MESH,this.optionsEnabled=!0,this.optionsVisible=!0,this.orientation=i.CORONAL,this.graphEnabled=!1,this.graphVisible=!0}_boundingBoxVisible(e){this.boundingBoxVisible=e,this.boundingBoxVisibleChanged.emit(e)}_displayMode(e){this.displayMode=e,this.displayModeChanged.emit(e)}_graphEnabled(e){this.graphEnabled=e,this.graphEnabledChanged.emit(e)}_orientation(e){this.orientation=e,this.orientationChanged.emit(e)}_slicesIndex(e){this.slicesIndex=e,this.slicesIndexChanged.emit(e)}_slicesWindowCenter(e){this.slicesWindowCenter=e,this.slicesWindowCenterChanged.emit(e)}_slicesWindowWidth(e){this.slicesWindowWidth=e,this.slicesWindowWidthChanged.emit(e)}_volumeSteps(e){this.volumeSteps=e,this.volumeStepsChanged.emit(e)}_volumeWindowCenter(e){this.volumeWindowCenter=e,this.volumeWindowCenterChanged.emit(e)}_volumeWindowWidth(e){this.volumeWindowWidth=e,this.volumeWindowWidthChanged.emit(e)}renderDisplayModeToggle(){return this.displayMode!==t.MESH?e("ion-item",{id:"mode"},e("ion-icon",{name:"eye",slot:"start"}),e("select",{slot:"end",onChange:e=>this._displayMode(e.srcElement.value)},e("option",{selected:this.displayMode===t.SLICES,value:t.SLICES},"Slices"),e("option",{selected:this.displayMode===t.VOLUME,value:t.VOLUME},"Volume"))):null}renderNodesToggle(){return this.graphVisible?e("ion-item",null,e("ion-icon",{name:"add-circle",slot:"start"}),e("ion-toggle",{slot:"end",checked:this.graphEnabled,onIonChange:e=>this._graphEnabled(e.detail.checked)})):null}renderBoundingBoxEnabled(){return e("ion-item",null,e("ion-icon",{name:"cube",slot:"start"}),e("ion-toggle",{slot:"end",checked:this.boundingBoxVisible,onIonChange:e=>this._boundingBoxVisible(e.detail.checked)}))}_reverseNumber(e,t,i){return i+t-e}renderOptions(){switch(this.displayMode){case t.SLICES:{if(!this.stackhelper||this.stackhelper&&!this.stackhelper.slice)break;const t=Object.keys(i).indexOf(this.orientation.toUpperCase()),n=this.stackhelper.stack.zCosine;let s;s=1===Math.round(n.x)?1:1===Math.round(n.y)?2:0;const o=Math.round((t+s)%3),l=Math.round((t+s+2)%3),a=this.stackhelper.stack.dimensionsIJK[Object.keys(this.stackhelper.stack.dimensionsIJK)[l]]-1;let d;d=void 0===this.slicesIndex?Math.floor(a/2):this.slicesIndex;const h=1,r=this.stackhelper.stack.minMax[1]-this.stackhelper.stack.minMax[0];let c;c=void 0===this.slicesWindowWidth?r/2:this.slicesWindowWidth;const m=this.stackhelper.stack.minMax[0],u=this.stackhelper.stack.minMax[1];let p;return p=void 0===this.slicesWindowCenter?u/2:this.slicesWindowCenter,this.stackhelper.orientation=o,this.stackhelper.index=d,this.stackhelper.slice.windowWidth=c,this.stackhelper.slice.windowCenter=p,this.optionsVisible&&this.optionsEnabled?e("div",null,this.renderBoundingBoxEnabled(),e("ion-item",null,e("ion-icon",{name:"swap",slot:"start"}),e("ion-range",{slot:"end",min:"0",max:a,value:d,onIonChange:e=>this._slicesIndex(e.detail.value)})),e("ion-item",null,e("ion-icon",{name:"compass",slot:"start"}),e("select",{slot:"end",onChange:e=>this._orientation(e.srcElement.value)},e("option",{selected:this.orientation===i.CORONAL,value:i.CORONAL},"Coronal (x)"),e("option",{selected:this.orientation===i.SAGGITAL,value:i.SAGGITAL},"Saggital (y)"),e("option",{selected:this.orientation===i.AXIAL,value:i.AXIAL},"Axial (z)"))),e("ion-item",null,e("ion-icon",{name:"sunny",slot:"start"}),e("ion-range",{slot:"end",min:m,max:u,value:this._reverseNumber(p,m,u),onIonChange:e=>this._slicesWindowCenter(this._reverseNumber(e.detail.value,m,u))})),e("ion-item",null,e("ion-icon",{name:"contrast",slot:"start"}),e("ion-range",{slot:"end",min:h,max:r,value:this._reverseNumber(c,h,r),onIonChange:e=>this._slicesWindowWidth(this._reverseNumber(e.detail.value,h,r))}))):null}case t.VOLUME:{if(!this.stackhelper||this.stackhelper&&!this.stackhelper.uniforms)break;const t=1,i=128;let n;const s=1,o=this.stackhelper.stack.minMax[1]-this.stackhelper.stack.minMax[0];let l;l=void 0===this.volumeWindowWidth?o/2:this.volumeWindowWidth;const a=this.stackhelper.stack.minMax[0],d=this.stackhelper.stack.minMax[1];let h;return h=void 0===this.volumeWindowCenter?d/2:this.volumeWindowCenter,this.stackhelper.uniforms.uSteps.value=n=void 0===this.volumeSteps?8:this.volumeSteps,this.stackhelper.windowWidth=l,this.stackhelper.windowCenter=h,e("div",null,this.renderBoundingBoxEnabled(),e("ion-item",null,e("ion-icon",{name:"swap",slot:"start"}),e("ion-range",{slot:"end",min:t,max:i,value:n,onMouseUp:e=>this._volumeSteps(e.srcElement.value)})),e("ion-item",null,e("ion-icon",{name:"sunny",slot:"start"}),e("ion-range",{slot:"end",min:a,max:d,value:h,onMouseUp:e=>this._volumeWindowCenter(e.srcElement.value)})),e("ion-item",null,e("ion-icon",{name:"contrast",slot:"start"}),e("ion-range",{slot:"end",min:s,max:o,value:l,onMouseUp:e=>this._volumeWindowWidth(e.srcElement.value)})))}case t.MESH:return this.renderBoundingBoxEnabled()}return null}render(){return[this.renderDisplayModeToggle(),this.renderNodesToggle(),this.renderOptions()]}static get is(){return"al-control-panel"}static get encapsulation(){return"shadow"}static get properties(){return{boundingBoxVisible:{type:Boolean,attr:"bounding-box-visible",mutable:!0},displayMode:{type:String,attr:"display-mode",mutable:!0},graphEnabled:{type:Boolean,attr:"graph-enabled",mutable:!0},graphVisible:{type:Boolean,attr:"graph-visible",mutable:!0},optionsEnabled:{type:Boolean,attr:"options-enabled",mutable:!0},optionsVisible:{type:Boolean,attr:"options-visible",mutable:!0},orientation:{type:String,attr:"orientation",mutable:!0},slicesIndex:{type:Number,attr:"slices-index",mutable:!0},slicesWindowCenter:{type:Number,attr:"slices-window-center",mutable:!0},slicesWindowWidth:{type:Number,attr:"slices-window-width",mutable:!0},stackhelper:{type:"Any",attr:"stackhelper",mutable:!0},volumeSteps:{type:Number,attr:"volume-steps",mutable:!0},volumeWindowCenter:{type:Number,attr:"volume-window-center",mutable:!0},volumeWindowWidth:{type:Number,attr:"volume-window-width",mutable:!0}}}static get events(){return[{name:"boundingBoxVisibleChanged",method:"boundingBoxVisibleChanged",bubbles:!0,cancelable:!0,composed:!0},{name:"displayModeChanged",method:"displayModeChanged",bubbles:!0,cancelable:!0,composed:!0},{name:"optionsEnabledChanged",method:"optionsEnabledChanged",bubbles:!0,cancelable:!0,composed:!0},{name:"orientationChanged",method:"orientationChanged",bubbles:!0,cancelable:!0,composed:!0},{name:"slicesIndexChanged",method:"slicesIndexChanged",bubbles:!0,cancelable:!0,composed:!0},{name:"slicesWindowCenterChanged",method:"slicesWindowCenterChanged",bubbles:!0,cancelable:!0,composed:!0},{name:"slicesWindowWidthChanged",method:"slicesWindowWidthChanged",bubbles:!0,cancelable:!0,composed:!0},{name:"graphEnabledChanged",method:"graphEnabledChanged",bubbles:!0,cancelable:!0,composed:!0},{name:"volumeStepsChanged",method:"volumeStepsChanged",bubbles:!0,cancelable:!0,composed:!0},{name:"volumeWindowCenterChanged",method:"volumeWindowCenterChanged",bubbles:!0,cancelable:!0,composed:!0},{name:"volumeWindowWidthChanged",method:"volumeWindowWidthChanged",bubbles:!0,cancelable:!0,composed:!0}]}static get style(){return"ion-item{--border-width:0 0 0 0;--inner-border-width:0 0 0 0}ion-item select{padding:5px;min-width:100px}"}}export{n as AlControlPanel};