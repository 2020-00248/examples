/*! Built with http://stenciljs.com */
amiviewer.loadBundle("ea0tomtz",["exports"],function(e){var t=window.amiviewer.h,r=function(){function e(){}return e.prototype.watchHandler=function(){this.reset()},e.prototype.componentDidLoad=function(){this.reset()},e.prototype.reset=function(){var e=this;console.log("setting up ami-viewer"),this._renderer=new THREE.WebGLRenderer({antialias:!0}),this._renderer.setSize(this._container.offsetWidth,this._container.offsetHeight),this._renderer.setClearColor(0,1),this._renderer.setPixelRatio(window.devicePixelRatio),this._container.appendChild(this._renderer.domElement);var t=new THREE.Scene;this._camera=new THREE.PerspectiveCamera(45,this._container.offsetWidth/this._container.offsetHeight,.1,1e3),this._camera.position.x=150,this._camera.position.y=150,this._camera.position.z=100;var r,n=new AMI.TrackballControl(this._camera,this._container);window.addEventListener("resize",function(){e.resize()},!1),(r=this.series,new Promise(function(e,t){var n=new XMLHttpRequest;n.open("GET",r,!0),n.onload=function(){var t,r=JSON.parse(n.responseText);t=r.baseurl,r=r.series.map(function(e){return t.endsWith("/")||(t+="/"),""+t+e}),e(r)},n.onerror=function(){t()},n.send()})).then(function(r){var i=new AMI.VolumeLoader(e._container);i.load(r).then(function(){var r=i.data[0].mergeSeries(i.data)[0].stack[0];i.free();var o=new AMI.StackHelper(r);o.bbox.color=16711680,o.border.color=255,t.add(o),e.onLoaded.emit(o);var a=o.stack.worldCenter();e._camera.lookAt(a.x,a.y,a.z),e._camera.updateProjectionMatrix(),n.target.set(a.x,a.y,a.z)}).catch(function(e){console.log("DICOM load error"),console.error(e)});var o=function(){n.update(),e._renderer.render(t,e._camera),requestAnimationFrame(function(){o()})};o()})},e.prototype.resize=function(){this._camera.aspect=this._container.offsetWidth/this._container.offsetHeight,this._camera.updateProjectionMatrix(),this._renderer.setSize(this._container.offsetWidth,this._container.offsetHeight)},e.prototype.render=function(){var e=this;return t("div",{id:"container",ref:function(t){return e._container=t}})},Object.defineProperty(e,"is",{get:function(){return"ami-viewer"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"encapsulation",{get:function(){return"shadow"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{reset:{method:!0},resize:{method:!0},series:{type:String,attr:"series",watchCallbacks:["watchHandler"]}}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"events",{get:function(){return[{name:"onLoaded",method:"onLoaded",bubbles:!0,cancelable:!0,composed:!0}]},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return"#container.sc-ami-viewer{background-color:#000;left:0;right:0;top:0;bottom:0;position:absolute;width:100%;height:100%;overflow:hidden}#gui-container.sc-ami-viewer{position:fixed;top:10px;right:10px;z-index:1}"},enumerable:!0,configurable:!0}),e}();e.AmiViewer=r,Object.defineProperty(e,"__esModule",{value:!0})});