(window.webpackJsonpUV=window.webpackJsonpUV||[]).push([[6],{123:function(e,t,n){"use strict";n.r(t);var i,o=n(3),s=n(34),a=n(60),r=n(7),h=n(4),l=n(1),p=n(73),c=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(t){var n=e.call(this,t)||this;return n._mediaReady=!1,n._isThumbsViewOpen=!1,n.attributionPosition=a.a.BOTTOM_RIGHT,n}return c(t,e),t.prototype.create=function(){var t=this;this.setConfig("avCenterPanel"),e.prototype.create.call(this);var n=this;this.component.subscribe(o.a.OPEN_EXTERNAL_RESOURCE,(function(e){n.openMedia(e)})),this.component.subscribe(o.a.CANVAS_INDEX_CHANGED,(function(e){t._viewCanvas(e)})),this.component.subscribe(o.a.RANGE_CHANGED,(function(e){t._observeRangeChanges()&&t._whenMediaReady((function(){n._viewRange(e),n._setTitle()}))})),this.component.subscribe(o.a.METRIC_CHANGED,(function(){t._whenMediaReady((function(){t.avcomponent&&t.avcomponent.set({limitToRange:t._limitToRange(),constrainNavigationToRange:t._limitToRange()})}))})),this.component.subscribe(o.a.CREATED,(function(){t._setTitle()})),this.component.subscribe(o.a.OPEN_THUMBS_VIEW,(function(){t._isThumbsViewOpen=!0,t._whenMediaReady((function(){t.avcomponent&&(t.avcomponent.set({virtualCanvasEnabled:!1}),t.extension.helper.getCurrentCanvas()&&t._viewCanvas(t.extension.helper.canvasIndex))}))})),this.component.subscribe(o.a.OPEN_TREE_VIEW,(function(){t._isThumbsViewOpen=!1,t._whenMediaReady((function(){t.avcomponent&&t.avcomponent.set({virtualCanvasEnabled:!0})}))})),this._createAVComponent()},t.prototype._createAVComponent=function(){var e=this;this.$avcomponent=$('<div class="iiif-av-component"></div>'),this.$content.prepend(this.$avcomponent),this.avcomponent=new p.AVComponent({target:this.$avcomponent[0],data:{posterImageExpanded:this.options.posterImageExpanded}}),this.avcomponent.on("mediaready",(function(){console.log("mediaready"),e._mediaReady=!0}),!1),this.avcomponent.on("rangechanged",(function(t){if(t){e._setTitle();var n=e.extension.helper.getRangeById(t);if(n)n!==e.extension.helper.getCurrentRange()&&e.component.publish(o.a.RANGE_CHANGED,n);else e.component.publish(o.a.RANGE_CHANGED,null)}else e.component.publish(o.a.RANGE_CHANGED,null)}),!1)},t.prototype._observeRangeChanges=function(){return!this._isThumbsViewOpen},t.prototype._setTitle=function(){var e,t,n=this,i="",o=this.extension.helper.getCurrentRange();t=o?o.getLabel():this.extension.helper.getCurrentCanvas().getLabel(),(e=l.LanguageMap.getValue(t))&&(i=e),h.b.getBool(this.config.options.includeParentInTitleEnabled,!1)&&(o?o.parentRange&&(t=o.parentRange.getLabel(),e=l.LanguageMap.getValue(t)):e=this.extension.helper.getLabel(),e&&(i+=this.content.delimiter+e)),this.title=i;for(var s=this.extension.helper.getMetadata({range:o}),a=0;a<s.length;a++){var p=s[a].items.find((function(e){if(e.label){var t=l.LanguageMap.getValue(e.label);if(t&&t.toLowerCase()===n.config.options.subtitleMetadataField)return!0}return!1}));if(p){this.subtitle=l.LanguageMap.getValue(p.value);break}}this.$title.text(Object(r.c)(this.title)),this.resize(!1)},t.prototype._isCurrentResourceAccessControlled=function(){return this.extension.helper.getCurrentCanvas().externalResource.isAccessControlled()},t.prototype.openMedia=function(e){var t=this;this.extension.getExternalResources(e).then((function(){t.avcomponent&&(t.extension.helper.canvasIndex===t._lastCanvasIndex&&t.avcomponent.reset(),t._lastCanvasIndex=t.extension.helper.canvasIndex,t.avcomponent.set({helper:t.extension.helper,adaptiveAuthEnabled:t._isCurrentResourceAccessControlled(),autoPlay:t.config.options.autoPlay,autoSelectRange:!0,constrainNavigationToRange:t._limitToRange(),content:t.content,defaultAspectRatio:.56,doubleClickMS:350,limitToRange:t._limitToRange(),posterImageRatio:t.config.options.posterImageRatio}),t.resize())}))},t.prototype._limitToRange=function(){return!this.extension.isDesktopMetric()},t.prototype._whenMediaReady=function(e){var t=this;h.a.waitFor((function(){return t._mediaReady}),e)},t.prototype._viewRange=function(e){var t=this;this._whenMediaReady((function(){e&&t.avcomponent&&t.avcomponent.playRange(e.id),t.resize(!1)}))},t.prototype._viewCanvas=function(e){var t=this;this._whenMediaReady((function(){var n=t.extension.helper.getCanvasByIndex(e);t.avcomponent&&t.avcomponent.showCanvas(n.id)}))},t.prototype.resize=function(t){void 0===t&&(t=!0),e.prototype.resize.call(this),t&&this.avcomponent&&(this.$avcomponent.height(this.$content.height()),this.avcomponent.resize())},t}(s.a),d=n(41),g=n(46),f=n(28),b=n(27),y=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),m=function(e){function t(t){return e.call(this,t)||this}return y(t,e),t.prototype.create=function(){var t=this;this.setConfig("downloadDialogue"),e.prototype.create.call(this),this.$entireFileAsOriginal=$('<li class="option single"><input id="'+b.a.ENTIRE_FILE_AS_ORIGINAL+'" type="radio" name="downloadOptions" tabindex="0" /><label id="'+b.a.ENTIRE_FILE_AS_ORIGINAL+'label" for="'+b.a.ENTIRE_FILE_AS_ORIGINAL+'"></label></li>'),this.$downloadOptions.append(this.$entireFileAsOriginal),this.$entireFileAsOriginal.hide(),this.$downloadButton=$('<a class="btn btn-primary" href="#" tabindex="0">'+this.content.download+"</a>"),this.$buttons.prepend(this.$downloadButton),this.$imageOptionsContainer=$('<li class="group image"></li>'),this.$imageOptions=$("<ul></ul>"),this.$imageOptionsContainer.append(this.$imageOptions),this.$canvasOptionsContainer=$('<li class="group canvas"></li>'),this.$canvasOptions=$("<ul></ul>"),this.$canvasOptionsContainer.append(this.$canvasOptions),this.$manifestOptionsContainer=$('<li class="group manifest"></li>'),this.$manifestOptions=$("<ul></ul>"),this.$manifestOptionsContainer.append(this.$manifestOptions);var n=this;this.$downloadButton.on("click",(function(e){e.preventDefault();var i=n.getSelectedOption(),s=i.attr("id"),a=i.attr("title"),r=b.a.UNKNOWN;if(t.renderingUrls[s])window.open(t.renderingUrls[s]);else{var h=t.getCurrentResourceId();window.open(h)}t.component.publish(o.a.DOWNLOAD,{type:r,label:a}),t.close()}))},t.prototype._isAdaptive=function(){var e=this.getCurrentResourceFormat();return"mpd"===e||"m3u8"===e},t.prototype.open=function(t){e.prototype.open.call(this,t);var n=this.extension.helper.getCurrentCanvas();if(this.isDownloadOptionAvailable(b.a.ENTIRE_FILE_AS_ORIGINAL)&&!this._isAdaptive()){var i=this.$entireFileAsOriginal.find("input"),o=this.$entireFileAsOriginal.find("label"),s=h.n.format(this.content.entireFileAsOriginalWithFormat,this.getCurrentResourceFormat());o.text(s),i.prop("title",s),this.$entireFileAsOriginal.show()}if(this.resetDynamicDownloadOptions(),this.isDownloadOptionAvailable(b.a.RANGE_RENDERINGS)&&n.ranges&&n.ranges.length)for(var a=0;a<n.ranges.length;a++){var r=n.ranges[a],l=this.getDownloadOptionsForRenderings(r,this.content.entireFileAsOriginal,b.a.CANVAS_RENDERINGS);this.addDownloadOptionsForRenderings(l)}if(this.isDownloadOptionAvailable(b.a.IMAGE_RENDERINGS)){var p=n.getImages();p.length&&this.$downloadOptions.append(this.$imageOptionsContainer);for(a=0;a<p.length;a++){var l=this.getDownloadOptionsForRenderings(p[a].getResource(),this.content.entireFileAsOriginal,b.a.IMAGE_RENDERINGS);this.addDownloadOptionsForRenderings(l)}}this.isDownloadOptionAvailable(b.a.CANVAS_RENDERINGS)&&((l=this.getDownloadOptionsForRenderings(n,this.content.entireFileAsOriginal,b.a.CANVAS_RENDERINGS)).length&&(this.$downloadOptions.append(this.$canvasOptionsContainer),this.addDownloadOptionsForRenderings(l)));this.isDownloadOptionAvailable(b.a.MANIFEST_RENDERINGS)&&(!(l=this.getDownloadOptionsForRenderings(this.extension.helper.getCurrentSequence(),this.content.entireDocument,b.a.MANIFEST_RENDERINGS)).length&&this.extension.helper.manifest&&(l=this.getDownloadOptionsForRenderings(this.extension.helper.manifest,this.content.entireDocument,b.a.MANIFEST_RENDERINGS)),l.length&&(this.$downloadOptions.append(this.$manifestOptionsContainer),this.addDownloadOptionsForRenderings(l)));this.$downloadOptions.length&&this.$entireFileAsOriginal.hide(),this.$downloadOptions.find("li.option:visible").length?(this.$downloadOptions.find("li.option input:visible:first").prop("checked",!0),this.$noneAvailable.hide(),this.$downloadButton.show()):(this.$noneAvailable.show(),this.$downloadButton.hide()),this.resize()},t.prototype.addDownloadOptionsForRenderings=function(e){var t=this;e.forEach((function(e){switch(e.type){case b.a.IMAGE_RENDERINGS:t.$imageOptions.append(e.button);break;case b.a.CANVAS_RENDERINGS:t.$canvasOptions.append(e.button);break;case b.a.MANIFEST_RENDERINGS:t.$manifestOptions.append(e.button)}}))},t.prototype.isDownloadOptionAvailable=function(e){return this.isMediaDownloadEnabled()},t}(f.a),E=n(30),w=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),v=function(e){function t(t){return e.call(this,t)||this}return w(t,e),t.prototype.create=function(){this.setConfig("mobileFooterPanel"),e.prototype.create.call(this)},t.prototype.resize=function(){e.prototype.resize.call(this),this.$options.css("left",Math.floor(this.$element.width()/2-this.$options.width()/2))},t}(E.a),_=n(42),T=n(43),O=n(38),N=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),C=function(e){function t(t){return e.call(this,t)||this}return N(t,e),t.prototype.create=function(){this.setConfig("settingsDialogue"),e.prototype.create.call(this)},t}(O.a),R=n(39),A=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),I=function(e){function t(t){return e.call(this,t)||this}return A(t,e),t.prototype.create=function(){this.setConfig("shareDialogue"),e.prototype.create.call(this)},t.prototype.update=function(){e.prototype.update.call(this),this.code=this.extension.getEmbedScript(this.options.embedTemplate,this.currentWidth,this.currentHeight),this.$code.val(this.code)},t.prototype.resize=function(){e.prototype.resize.call(this)},t}(R.a),V=n(0),S=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return S(t,e),t.prototype.create=function(){var t=this;e.prototype.create.call(this),this.component.subscribe(o.a.CANVAS_INDEX_CHANGED,(function(e){t.viewCanvas(e)})),this.component.subscribe(o.a.TREE_NODE_SELECTED,(function(e){t.fire(o.a.TREE_NODE_SELECTED,e.data.path),t.treeNodeSelected(e)})),this.component.subscribe(o.a.THUMB_SELECTED,(function(e){t.component.publish(o.a.CANVAS_INDEX_CHANGED,e.index)}))},t.prototype.dependencyLoaded=function(e,t){e===this.getDependencyIndex("waveform-data")?window.WaveformData=t:e===this.getDependencyIndex("hls")&&(window.Hls=t)},t.prototype.createModules=function(){e.prototype.createModules.call(this),this.isHeaderPanelEnabled()?this.headerPanel=new _.a(this.shell.$headerPanel):this.shell.$headerPanel.hide(),this.isLeftPanelEnabled()?this.leftPanel=new g.a(this.shell.$leftPanel):this.shell.$leftPanel.hide(),this.centerPanel=new u(this.shell.$centerPanel),this.isRightPanelEnabled()?this.rightPanel=new T.a(this.shell.$rightPanel):this.shell.$rightPanel.hide(),this.isFooterPanelEnabled()?(this.footerPanel=new E.a(this.shell.$footerPanel),this.mobileFooterPanel=new v(this.shell.$mobileFooterPanel)):this.shell.$footerPanel.hide(),this.$shareDialogue=$('<div class="overlay share" aria-hidden="true"></div>'),this.shell.$overlays.append(this.$shareDialogue),this.shareDialogue=new I(this.$shareDialogue),this.$downloadDialogue=$('<div class="overlay download" aria-hidden="true"></div>'),this.shell.$overlays.append(this.$downloadDialogue),this.downloadDialogue=new m(this.$downloadDialogue),this.$settingsDialogue=$('<div class="overlay settings" aria-hidden="true"></div>'),this.shell.$overlays.append(this.$settingsDialogue),this.settingsDialogue=new C(this.$settingsDialogue),this.isHeaderPanelEnabled()&&this.headerPanel.init(),this.isLeftPanelEnabled()&&this.leftPanel.init(),this.isRightPanelEnabled()&&this.rightPanel.init(),this.isFooterPanelEnabled()&&this.footerPanel.init()},t.prototype.isLeftPanelEnabled=function(){var t=e.prototype.isLeftPanelEnabled.call(this),n=this.helper.getTree();return n&&n.nodes.length&&(t=!0),t},t.prototype.render=function(){e.prototype.render.call(this)},t.prototype.getEmbedScript=function(e,t,n){var i=this.getAppUri()+"#?manifest="+this.helper.manifestUri+"&c="+this.helper.collectionIndex+"&m="+this.helper.manifestIndex+"&s="+this.helper.sequenceIndex+"&cv="+this.helper.canvasIndex+"&rid="+this.helper.rangeId;return h.n.format(e,i,t.toString(),n.toString())},t.prototype.treeNodeSelected=function(e){var t=e.data;if(t.type)switch(t.type){case V.b.MANIFEST:case V.b.COLLECTION:break;default:this.viewRange(t.path)}},t.prototype.viewRange=function(e){var t=this.helper.getRangeByPath(e);t&&this.component.publish(o.a.RANGE_CHANGED,t)},t}(d.a);t.default=D},24:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(){function e(e){this.value=e}return e.prototype.toString=function(){return this.value},e.image=new e("image"),e.page=new e("page"),e}()},26:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(){function e(){}return e.namespace="openseadragonExtension.",e.CURRENT_VIEW_URI=e.namespace+"currentViewUri",e.IMAGE_SEARCH=e.namespace+"imageSearch",e.MODE_CHANGED=e.namespace+"modeChanged",e.NEXT_SEARCH_RESULT=e.namespace+"nextSearchResult",e.NEXT_IMAGES_SEARCH_RESULT_UNAVAILABLE=e.namespace+"nextImagesSearchResultUnavailable",e.PREV_IMAGES_SEARCH_RESULT_UNAVAILABLE=e.namespace+"prevImagesSearchResultUnavailable",e.PAGE_SEARCH=e.namespace+"pageSearch",e.PAGING_TOGGLED=e.namespace+"pagingToggled",e.PREV_SEARCH_RESULT=e.namespace+"prevSearchResult",e.PRINT=e.namespace+"print",e.ROTATE=e.namespace+"rotate",e.OPENSEADRAGON_ANIMATION_FINISH=e.namespace+"animationFinish",e.OPENSEADRAGON_ANIMATION_START=e.namespace+"animationStart",e.OPENSEADRAGON_ANIMATION=e.namespace+"animation",e.OPENSEADRAGON_OPEN=e.namespace+"open",e.OPENSEADRAGON_RESIZE=e.namespace+"resize",e.OPENSEADRAGON_ROTATION=e.namespace+"rotationChanged",e.SEARCH_PREVIEW_FINISH=e.namespace+"searchPreviewFinish",e.SEARCH_PREVIEW_START=e.namespace+"searchPreviewStart",e.SEARCH=e.namespace+"search",e.XYWH_CHANGED=e.namespace+"xywhChanged",e.ZOOM_IN=e.namespace+"zoomIn",e.ZOOM_OUT=e.namespace+"zoomOut",e}()},27:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.CANVAS_RENDERINGS="canvasRenderings",e.CURRENT_VIEW="currentView",e.ENTIRE_DOCUMENT_AS_PDF="entireDocumentAsPdf",e.ENTIRE_DOCUMENT_AS_TEXT="entireDocumentAsText",e.ENTIRE_FILE_AS_ORIGINAL="entireFileAsOriginal",e.IMAGE_RENDERINGS="imageRenderings",e.MANIFEST_RENDERINGS="manifestRenderings",e.RANGE_RENDERINGS="rangeRenderings",e.SELECTION="selection",e.UNKNOWN="unknown",e.WHOLE_IMAGE_HIGH_RES="wholeImageHighRes",e.WHOLE_IMAGE_LOW_RES="wholeImageLowRes",e.WHOLE_IMAGES_HIGH_RES="wholeImagesHighRes"}(i||(i={}))},28:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i,o=n(3),s=n(22),a=n(27),r=n(4),h=n(1),l=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),p=function(e){function t(t){return e.call(this,t)||this}return l(t,e),t.prototype.create=function(){var t=this;this.setConfig("downloadDialogue"),e.prototype.create.call(this),this.openCommand=o.a.SHOW_DOWNLOAD_DIALOGUE,this.closeCommand=o.a.HIDE_DOWNLOAD_DIALOGUE,this.component.subscribe(this.openCommand,(function(e){t.open(e)})),this.component.subscribe(this.closeCommand,(function(){t.close()})),this.$title=$("<h1>"+this.content.title+"</h1>"),this.$content.append(this.$title),this.$noneAvailable=$('<div class="noneAvailable">'+this.content.noneAvailable+"</div>"),this.$content.append(this.$noneAvailable),this.$downloadOptions=$('<ol class="options"></ol>'),this.$content.append(this.$downloadOptions),this.$footer=$('<div class="footer"></div>'),this.$content.append(this.$footer),this.$termsOfUseButton=$('<a href="#">'+this.extension.data.config.content.termsOfUse+"</a>"),this.$footer.append(this.$termsOfUseButton),this.$termsOfUseButton.onPressed((function(){t.component.publish(o.a.SHOW_TERMS_OF_USE)})),this.$element.hide(),this.updateTermsOfUseButton()},t.prototype.addEntireFileDownloadOptions=function(){if(this.isDownloadOptionAvailable(a.a.ENTIRE_FILE_AS_ORIGINAL)){this.$downloadOptions.empty();for(var e=this.extension.helper.getCurrentCanvas(),t=!1,n=e.getRenderings(),i=0;i<n.length;i++){var o=n[i],s=o.getFormat(),r="";s&&(r=s.toString()),this.addEntireFileDownloadOption(o.id,h.LanguageMap.getValue(o.getLabel()),r),t=!0}if(!t){var l=!1,p=e.getContent();for(i=0;i<p.length;i++){var c=p[i].getBody();if(c.length)(r=c[0].getFormat())&&(this.addEntireFileDownloadOption(c[0].id,"",r.toString()),l=!0)}l||this.addEntireFileDownloadOption(e.id,"","")}}},t.prototype.addEntireFileDownloadOption=function(e,t,n){var i;i=n?r.f.simplifyMimeType(n):this.getFileExtension(e),t||(t=this.content.entireFileAsOriginal),i&&(t+=" ("+i+")"),this.$downloadOptions.append('<li><a href="'+e+'" target="_blank" download tabindex="0">'+t+"</li>")},t.prototype.resetDynamicDownloadOptions=function(){this.renderingUrls=[],this.renderingUrlsCount=0,this.$downloadOptions.find("li.dynamic").remove()},t.prototype.getDownloadOptionsForRenderings=function(e,t,n){for(var i=e.getRenderings(),o=[],s=0;s<i.length;s++){var a=i[s];if(a){var l=h.LanguageMap.getValue(a.getLabel(),this.extension.getLocale()),p="downloadOption"+ ++this.renderingUrlsCount;l?l+=" ({0})":l=t;var c=r.f.simplifyMimeType(a.getFormat().toString());l=r.n.format(l,c),this.renderingUrls[p]=a.id;var u=$('<li class="option dynamic"><input id="'+p+'" data-mime="'+c+'" title="'+l+'" type="radio" name="downloadOptions" tabindex="0" /><label for="'+p+'">'+l+"</label></li>");o.push({type:n,button:u})}}return o},t.prototype.getSelectedOption=function(){return this.$downloadOptions.find("li.option input:checked")},t.prototype.getCurrentResourceId=function(){return this.extension.helper.getCurrentCanvas().externalResource.data.id},t.prototype.getCurrentResourceFormat=function(){var e=this.getCurrentResourceId();return e.substr(e.lastIndexOf(".")+1).toLowerCase()},t.prototype.updateNoneAvailable=function(){this.$downloadOptions.find("li:visible").length?this.$noneAvailable.hide():this.$noneAvailable.show()},t.prototype.updateTermsOfUseButton=function(){var e=this.extension.helper.getRequiredStatement();r.b.getBool(this.extension.data.config.options.termsOfUseEnabled,!1)&&e&&e.value?this.$termsOfUseButton.show():this.$termsOfUseButton.hide()},t.prototype.getFileExtension=function(e){var t=e.split(".").pop();return t.length>5||-1!==t.indexOf("/")?null:t},t.prototype.isMediaDownloadEnabled=function(){return this.extension.helper.isUIEnabled("mediaDownload")},t.prototype.isDownloadOptionAvailable=function(e){switch(e){case a.a.ENTIRE_FILE_AS_ORIGINAL:return this.isMediaDownloadEnabled()}return!0},t.prototype.close=function(){e.prototype.close.call(this)},t.prototype.resize=function(){this.setDockedPosition()},t}(s.a)},46:function(e,t,n){"use strict";var i,o=n(4),s=n(3),a=n(23),r=n(49),h=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t){var n=e.call(this,t,!0,!0)||this;return n.isOpen=!1,n}return h(t,e),t.prototype.create=function(){this.setConfig("contentLeftPanel"),e.prototype.create.call(this),this.$gallery=$('<div class="iiif-gallery-component"></div>'),this.$element.append(this.$gallery)},t.prototype.setup=function(){var e=this;this.galleryComponent=new r.a({target:this.$gallery[0]}),this.galleryComponent.on("thumbSelected",(function(t){e.component.publish(s.a.GALLERY_THUMB_SELECTED,t),e.component.publish(s.a.THUMB_SELECTED,t)}),!1),this.galleryComponent.on("decreaseSize",(function(){e.component.publish(s.a.GALLERY_DECREASE_SIZE)}),!1),this.galleryComponent.on("increaseSize",(function(){e.component.publish(s.a.GALLERY_INCREASE_SIZE)}),!1)},t.prototype.databind=function(){this.galleryComponent.options.data=this.galleryData,this.galleryComponent.set(this.galleryData),this.resize()},t.prototype.show=function(){var e=this;this.isOpen=!0,this.$element.show(),setTimeout((function(){e.galleryComponent.selectIndex(e.extension.helper.canvasIndex)}),10)},t.prototype.hide=function(){this.isOpen=!1,this.$element.hide()},t.prototype.resize=function(){e.prototype.resize.call(this);var t=this.$gallery.find(".main"),n=this.$gallery.find(".header");t.height(this.$element.height()-n.height())},t}(a.a),p=n(36),c=n(24),u=n(37),d=n(26),g=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t.prototype.create=function(){var t=this;this.setConfig("contentLeftPanel"),e.prototype.create.call(this),this.component.subscribe(d.a.MODE_CHANGED,(function(){t.setLabel()})),this.component.subscribe(d.a.SEARCH_PREVIEW_START,(function(e){t.searchPreviewStart(e)})),this.component.subscribe(d.a.SEARCH_PREVIEW_FINISH,(function(){t.searchPreviewFinish()})),this.extension.helper.isPaged()&&this.$thumbs.addClass("paged");var n=this;$.views.helpers({separator:function(){return!n.extension.helper.isPaged()||(this.data.index-1)%2!=0}})},t.prototype.addSelectedClassToThumbs=function(e){for(var t=this.extension.getPagedIndices(e),n=0;n<t.length;n++)this.getThumbByIndex(t[n]).addClass("selected")},t.prototype.isPageModeEnabled=function(){return"function"==typeof this.extension.getMode?this.config.options.pageModeEnabled&&this.extension.getMode().toString()===c.a.page.toString():this.config.options.pageModeEnabled},t.prototype.searchPreviewStart=function(e){this.scrollToThumb(e),this.getThumbByIndex(e).addClass("searchpreview")},t.prototype.searchPreviewFinish=function(){this.scrollToThumb(this.extension.helper.canvasIndex),this.getAllThumbs().removeClass("searchpreview")},t.prototype.setLabel=function(){this.isPDF()?($(this.$thumbs).find("span.index").hide(),$(this.$thumbs).find("span.label").hide()):this.isPageModeEnabled()?($(this.$thumbs).find("span.index").hide(),$(this.$thumbs).find("span.label").show()):($(this.$thumbs).find("span.index").show(),$(this.$thumbs).find("span.label").hide())},t}(u.a),b=n(55),y=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),m=function(e){function t(t){var n=e.call(this,t,!0,!0)||this;return n.isOpen=!1,n}return y(t,e),t.prototype.create=function(){this.setConfig("contentLeftPanel"),e.prototype.create.call(this),this.$tree=$('<div class="iiif-tree-component"></div>'),this.$element.append(this.$tree)},t.prototype.setup=function(){var e=this;this.treeComponent=new b.TreeComponent({target:this.$tree[0],data:this.treeData}),this.treeComponent.on("treeNodeSelected",(function(t){e.component.publish(s.a.TREE_NODE_SELECTED,t)}),!1),this.treeComponent.on("treeNodeMultiSelected",(function(t){e.component.publish(s.a.TREE_NODE_MULTISELECTED,t)}),!1)},t.prototype.databind=function(){var e=this;setTimeout((function(){e.treeComponent.set(e.treeData),e.resize()}),1)},t.prototype.show=function(){this.isOpen=!0,this.$element.show()},t.prototype.hide=function(){this.isOpen=!1,this.$element.hide()},t.prototype.selectNode=function(e){if(!this.treeComponent.selectedNode){this.treeComponent.expandParents(e,!0);var t=this.$tree.find("#tree-link-"+e.id)[0];t&&t.scrollIntoViewIfNeeded()}this.treeComponent.selectNode(e)},t.prototype.expandNode=function(e,t){this.treeComponent.expandNode(e,t)},t.prototype.getAllNodes=function(){return this.treeComponent.getAllNodes()},t.prototype.deselectCurrentNode=function(){this.treeComponent.deselectCurrentNode()},t.prototype.getNodeById=function(e){return this.treeComponent.getNodeById(e)},t.prototype.resize=function(){e.prototype.resize.call(this)},t}(a.a),E=n(1),w=n(8);n.d(t,"a",(function(){return O}));var v=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),_=n(35).ViewingDirection,T=n(35).ViewingHint,O=function(e){function t(t){var n=e.call(this,t)||this;return n.expandFullEnabled=!1,n.isThumbsViewOpen=!1,n.isTreeViewOpen=!1,n.treeSortType=w.c.NONE,n}return v(t,e),t.prototype.create=function(){var t=this;this.setConfig("contentLeftPanel"),e.prototype.create.call(this),this.component.subscribe(s.a.SETTINGS_CHANGED,(function(){t.databind()})),this.component.subscribe(s.a.GALLERY_THUMB_SELECTED,(function(){t.collapseFull()})),this.component.subscribe(s.a.METRIC_CHANGED,(function(){t.extension.isDesktopMetric()||t.isFullyExpanded&&t.collapseFull()})),this.component.subscribe(s.a.ANNOTATIONS,(function(){t.databindThumbsView(),t.databindGalleryView()})),this.component.subscribe(s.a.ANNOTATIONS_CLEARED,(function(){t.databindThumbsView(),t.databindGalleryView()})),this.component.subscribe(s.a.ANNOTATIONS_EMPTY,(function(){t.databindThumbsView(),t.databindGalleryView()})),this.component.subscribe(s.a.CANVAS_INDEX_CHANGED,(function(){t.isFullyExpanded&&t.collapseFull(),t.selectCurrentTreeNode(),t.updateTreeTabBySelection()})),this.component.subscribe(s.a.RANGE_CHANGED,(function(){t.isFullyExpanded&&t.collapseFull(),t.selectCurrentTreeNode(),t.updateTreeTabBySelection()})),this.$tabs=$('<div class="tabs"></div>'),this.$main.append(this.$tabs),this.$treeButton=$('<a class="index tab" tabindex="0">'+this.content.index+"</a>"),this.$tabs.append(this.$treeButton),this.$thumbsButton=$('<a class="thumbs tab" tabindex="0">'+this.content.thumbnails+"</a>"),this.$thumbsButton.prop("title",this.content.thumbnails),this.$tabs.append(this.$thumbsButton),this.$tabsContent=$('<div class="tabsContent"></div>'),this.$main.append(this.$tabsContent),this.$options=$('<div class="options"></div>'),this.$tabsContent.append(this.$options),this.$topOptions=$('<div class="top"></div>'),this.$options.append(this.$topOptions),this.$treeSelect=$('<select aria-label="'+this.content.manifestRanges+'"></select>'),this.$topOptions.append(this.$treeSelect),this.$bottomOptions=$('<div class="bottom"></div>'),this.$options.append(this.$bottomOptions),this.$leftOptions=$('<div class="left"></div>'),this.$bottomOptions.append(this.$leftOptions),this.$rightOptions=$('<div class="right"></div>'),this.$bottomOptions.append(this.$rightOptions),this.$treeViewOptions=$('<div class="treeView"></div>'),this.$leftOptions.append(this.$treeViewOptions),this.$sortByLabel=$('<span class="sort">'+this.content.sortBy+"</span>"),this.$treeViewOptions.append(this.$sortByLabel),this.$sortButtonGroup=$('<div class="btn-group"></div>'),this.$treeViewOptions.append(this.$sortButtonGroup),this.$sortByDateButton=$('<button class="btn" tabindex="0">'+this.content.date+"</button>"),this.$sortButtonGroup.append(this.$sortByDateButton),this.$sortByVolumeButton=$('<button class="btn" tabindex="0">'+this.content.volume+"</button>"),this.$sortButtonGroup.append(this.$sortByVolumeButton),this.$views=$('<div class="views"></div>'),this.$tabsContent.append(this.$views),this.$treeView=$('<div class="treeView"></div>'),this.$views.append(this.$treeView),this.$thumbsView=$('<div class="thumbsView" tabindex="0"></div>'),this.$views.append(this.$thumbsView),this.$galleryView=$('<div class="galleryView"></div>'),this.$views.append(this.$galleryView),this.$treeSelect.hide(),this.$treeSelect.change((function(){t.databindTreeView(),t.selectCurrentTreeNode(),t.updateTreeTabBySelection()})),this.$sortByDateButton.on("click",(function(){t.sortByDate()})),this.$sortByVolumeButton.on("click",(function(){t.sortByVolume()})),this.$treeViewOptions.hide(),this.$treeButton.onPressed((function(){t.openTreeView()})),this.$thumbsButton.onPressed((function(){t.openThumbsView()})),this.setTitle(this.content.title),this.$sortByVolumeButton.addClass("on");var n=this.options.tabOrder;n&&("thumbs"===(n=(n=n.toLowerCase()).replace(/ /g,"")).split(",")[0]?(this.$treeButton.before(this.$thumbsButton),this.$thumbsButton.addClass("first")):this.$treeButton.addClass("first"))},t.prototype.createTreeView=function(){this.treeView=new m(this.$treeView),this.treeView.treeData=this.getTreeData(),this.treeView.setup(),this.databindTreeView();var e=this.extension.helper.getTopRanges();if(e.length>1)for(var t=0;t<e.length;t++){var n=e[t];this.$treeSelect.append('<option value="'+n.id+'">'+E.LanguageMap.getValue(n.getLabel())+"</option>")}this.updateTreeViewOptions()},t.prototype.databind=function(){this.databindThumbsView(),this.databindTreeView(),this.databindGalleryView()},t.prototype.updateTreeViewOptions=function(){var e=this.getTree();e&&(this.isCollection()&&this.extension.helper.treeHasNavDates(e)?this.$treeViewOptions.show():this.$treeViewOptions.hide(),this.$treeSelect.find("option").length?this.$treeSelect.show():this.$treeSelect.hide())},t.prototype.sortByDate=function(){this.treeSortType=w.c.DATE,this.treeView.treeData=this.getTreeData(),this.treeView.databind(),this.selectCurrentTreeNode(),this.$sortByDateButton.addClass("on"),this.$sortByVolumeButton.removeClass("on"),this.resize()},t.prototype.sortByVolume=function(){this.treeSortType=w.c.NONE,this.treeView.treeData=this.getTreeData(),this.treeView.databind(),this.selectCurrentTreeNode(),this.$sortByDateButton.removeClass("on"),this.$sortByVolumeButton.addClass("on"),this.resize()},t.prototype.isCollection=function(){var e=this.getTree();if(e)return e.data.type===E.TreeNodeType.COLLECTION;throw new Error("Tree not available")},t.prototype.databindTreeView=function(){this.treeView&&(this.treeView.treeData=this.getTreeData(),this.treeView.databind(),this.selectCurrentTreeNode())},t.prototype.getTreeData=function(){return{autoExpand:this._isTreeAutoExpanded(),branchNodesExpandOnClick:o.b.getBool(this.config.options.branchNodesExpandOnClick,!0),branchNodesSelectable:o.b.getBool(this.config.options.branchNodesSelectable,!1),helper:this.extension.helper,topRangeIndex:this.getSelectedTopRangeIndex(),treeSortType:this.treeSortType}},t.prototype._isTreeAutoExpanded=function(){var e=o.b.getBool(this.config.options.autoExpandTreeEnabled,!1),t=this.config.options.autoExpandTreeIfFewerThan||0;if(e){var n=this.extension.helper.getFlattenedTree();if(n&&n.length<t)return!0}return!1},t.prototype.updateTreeTabByCanvasIndex=function(){var e=this.extension.helper.getTopRanges();if(e.length>1){var t=this.getCurrentCanvasTopRangeIndex();if(-1===t)return;var n=e[t];this.setTreeTabTitle(E.LanguageMap.getValue(n.getLabel()))}else this.setTreeTabTitle(this.content.index)},t.prototype.setTreeTabTitle=function(e){this.$treeButton.text(e),this.$treeButton.prop("title",e)},t.prototype.updateTreeTabBySelection=function(){var e=null,t=this.extension.helper.getTopRanges();t.length>1&&(e=this.treeView?this.getSelectedTree().text():E.LanguageMap.getValue(t[0].getLabel())),e?this.setTreeTabTitle(e):this.setTreeTabTitle(this.content.index)},t.prototype.getViewingHint=function(){return this.extension.helper.getViewingHint()},t.prototype.getViewingDirection=function(){return this.extension.helper.getViewingDirection()},t.prototype.createThumbsView=function(){this.thumbsView=new f(this.$thumbsView),this.databindThumbsView()},t.prototype.databindThumbsView=function(){if(this.thumbsView){var e,t,n=this.getViewingHint(),i=this.getViewingDirection();!i||i!==_.LEFT_TO_RIGHT&&i!==_.RIGHT_TO_LEFT?n&&n===T.PAGED?(e=this.config.options.twoColThumbWidth,t=this.config.options.twoColThumbHeight):(e=this.config.options.oneColThumbWidth,t=this.config.options.oneColThumbHeight):(e=this.config.options.twoColThumbWidth,t=this.config.options.twoColThumbHeight);var o=this.extension.helper.getThumbs(e,t);i&&i===_.BOTTOM_TO_TOP&&o.reverse();var s=this.extension.annotations;if(s&&s.length)for(var a=function(e){var t=s[e],n=o.filter((function(e){return e.index===t.canvasIndex}))[0];if(n){var i=$.extend(!0,{},n.data);i.searchResults=t.rects.length,n.data=i}},r=0;r<s.length;r++)a(r);this.thumbsView.thumbs=o,this.thumbsView.databind()}},t.prototype.createGalleryView=function(){this.galleryView=new l(this.$galleryView),this.galleryView.galleryData=this.getGalleryData(),this.galleryView.setup(),this.databindGalleryView()},t.prototype.databindGalleryView=function(){this.galleryView&&(this.galleryView.galleryData=this.getGalleryData(),this.galleryView.databind())},t.prototype.getGalleryData=function(){return{helper:this.extension.helper,chunkedResizingThreshold:this.config.options.galleryThumbChunkedResizingThreshold,content:this.config.content,debug:!1,imageFadeInDuration:300,initialZoom:6,minLabelWidth:20,pageModeEnabled:this.isPageModeEnabled(),scrollStopDuration:100,searchResults:this.extension.annotations,sizingEnabled:!0,thumbHeight:this.config.options.galleryThumbHeight,thumbLoadPadding:this.config.options.galleryThumbLoadPadding,thumbWidth:this.config.options.galleryThumbWidth,viewingDirection:this.getViewingDirection()}},t.prototype.isPageModeEnabled=function(){return"function"==typeof this.extension.getMode?o.b.getBool(this.config.options.pageModeEnabled,!0)&&this.extension.getMode().toString()===c.a.page.toString():o.b.getBool(this.config.options.pageModeEnabled,!0)},t.prototype.getSelectedTree=function(){return this.$treeSelect.find(":selected")},t.prototype.getSelectedTopRangeIndex=function(){var e=this.getSelectedTree().index();return-1===e&&(e=0),e},t.prototype.getTree=function(){var e=this.getSelectedTopRangeIndex();return this.extension.helper.getTree(e,w.c.NONE)},t.prototype.toggleFinish=function(){if(e.prototype.toggleFinish.call(this),this.isUnopened){var t=o.b.getBool(this.config.options.treeEnabled,!0),n=o.b.getBool(this.config.options.thumbsEnabled,!0),i=this.getTree();i&&i.nodes.length||(t=!1),t&&n||this.$tabs.hide(),n&&this.defaultToThumbsView()?this.openThumbsView():t&&this.openTreeView()}},t.prototype.defaultToThumbsView=function(){var e=o.b.getBool(this.config.options.defaultToTreeEnabled,!1),t=this.config.options.defaultToTreeIfGreaterThan||0,n=this.getTree();return!(e&&n&&n.nodes.length>t)},t.prototype.expandFullStart=function(){e.prototype.expandFullStart.call(this),this.component.publish(s.a.LEFTPANEL_EXPAND_FULL_START)},t.prototype.expandFullFinish=function(){e.prototype.expandFullFinish.call(this),this.$treeButton.hasClass("on")?this.openTreeView():this.$thumbsButton.hasClass("on")&&this.openThumbsView(),this.component.publish(s.a.LEFTPANEL_EXPAND_FULL_FINISH)},t.prototype.collapseFullStart=function(){e.prototype.collapseFullStart.call(this),this.component.publish(s.a.LEFTPANEL_COLLAPSE_FULL_START)},t.prototype.collapseFullFinish=function(){e.prototype.collapseFullFinish.call(this),this.$thumbsButton.hasClass("on")&&this.openThumbsView(),this.component.publish(s.a.LEFTPANEL_COLLAPSE_FULL_FINISH)},t.prototype.openTreeView=function(){this.isTreeViewOpen=!0,this.isThumbsViewOpen=!1,this.treeView||this.createTreeView(),this.$treeButton.addClass("on"),this.$thumbsButton.removeClass("on"),this.treeView.show(),this.thumbsView&&this.thumbsView.hide(),this.galleryView&&this.galleryView.hide(),this.updateTreeViewOptions(),this.selectCurrentTreeNode(),this.resize(),this.treeView.resize(),this.component.publish(s.a.OPEN_TREE_VIEW)},t.prototype.openThumbsView=function(){this.isTreeViewOpen=!1,this.isThumbsViewOpen=!0,this.thumbsView||this.createThumbsView(),this.isFullyExpanded&&!this.galleryView&&this.createGalleryView(),this.$treeButton.removeClass("on"),this.$thumbsButton.addClass("on"),this.treeView&&this.treeView.hide(),this.$treeSelect.hide(),this.$treeViewOptions.hide(),this.resize(),this.isFullyExpanded?(this.thumbsView.hide(),this.galleryView&&this.galleryView.show(),this.galleryView&&this.galleryView.resize()):(this.galleryView&&this.galleryView.hide(),this.thumbsView.show(),this.thumbsView.resize()),this.component.publish(s.a.OPEN_THUMBS_VIEW)},t.prototype.selectTopRangeIndex=function(e){this.$treeSelect.prop("selectedIndex",e)},t.prototype.getCurrentCanvasTopRangeIndex=function(){var e=-1,t=this.extension.getCurrentCanvasRange();return t&&(e=Number(t.path.split("/")[0])),e},t.prototype.selectCurrentTreeNode=function(){"uv-openseadragon-extension"===this.extension.name?this.selectCurrentTreeNodeByCanvas():this.selectCurrentTreeNodeByRange()},t.prototype.selectCurrentTreeNodeByRange=function(){if(this.treeView){var e=this.extension.helper.getCurrentRange(),t=null;e&&e.treeNode&&(t=this.treeView.getNodeById(e.treeNode.id)),t?this.treeView.selectNode(t):this.selectTreeNodeByManifest()}},t.prototype.selectCurrentTreeNodeByCanvas=function(){if(this.treeView){var e=null,t=this.getCurrentCanvasTopRangeIndex(),n=t===this.getSelectedTopRangeIndex(),i=null;-1!==t&&(i=this.extension.getCurrentCanvasRange())&&i.treeNode&&(e=this.treeView.getNodeById(i.treeNode.id)),e&&n?this.treeView.selectNode(e):((i=this.extension.helper.getCurrentRange())&&i.treeNode&&(e=this.treeView.getNodeById(i.treeNode.id)),e?this.treeView.selectNode(e):this.selectTreeNodeByManifest())}},t.prototype.selectTreeNodeByManifest=function(){var e=this,t=this.extension.helper.collectionIndex,n=this.extension.helper.manifestIndex,i=this.treeView.getAllNodes(),o=!1;i.map((function(i){i.isCollection()&&i.data.index===t&&(e.treeView.selectNode(i),e.treeView.expandNode(i,!0),o=!0),i.isManifest()&&i.data.index===n&&(e.treeView.selectNode(i),o=!0)})),o||this.treeView.deselectCurrentNode()},t.prototype.resize=function(){e.prototype.resize.call(this),this.$tabsContent.height(this.$main.height()-(this.$tabs.is(":visible")?this.$tabs.height():0)-this.$tabsContent.verticalPadding()),this.$views.height(this.$tabsContent.height()-this.$options.outerHeight())},t}(p.a)}}]);